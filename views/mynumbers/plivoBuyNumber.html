
<br>
<div class="col-md-12 col-sm-12 col-xs-12" >
    <div class="col-md-11 col-sm-11 col-xs-11">
        <h3>Plivo</h3>
    </div>
</div>


<div class="col-md-12 col-sm-12 col-xs-12" ng-controller="PlivoController">
    <div class="x_content" ng-class="{ 'ui-disabled' : isProcessing }">
            <br>
        <div class="row">
            <div class="search-main-wrap" ng-if="isProcessing">
                <div class="row ">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="data-state-wrap">
                            Please Wait...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
                <div class="col-md-3 col-sm-3 col-xs-12">
                    <span>Country</span>
                    <select ng-change="setCountryPrefix(selectedCountry)" ng-model="selectedCountry" class="form-control" id="country" ng-options="country as country.name for country in supportedCountries" ></select>
                    
                    <!-- <input type="text" ng-model="selected" ng-model-options="modelOptions"
                    uib-typeahead="country.name for country in countries | filter:$viewValue | limitTo:8" typeahead-on-select="setCountryPrefix($item)" placeholder="Select Country" class="form-control"> -->
                </div>

                <div class="col-md-2 col-sm-2 col-xs-12">
                    <span>Number Type</span>
                    <select ng-model="numberType" class="form-control" id="type">
                        <option value="fixed">Fixed</option>
                        <option value="local">Local</option>
                        <option value="national">National</option>
                        <option value="mobile">Mobile</option>
                        <option value="tollfree">Toll-Free</option>
                        <option value="any">Any</option>
                    </select>
                </div>
                
                <div class="col-md-2 col-sm-2 col-xs-12">
                    <span>Search Type</span>
                    <select ng-model="searchType" class="form-control" id="type">
                        <option value="pattern">Number</option>
                        <option value="region" ng-if="['fixed', 'local', 'national', 'any' ].indexOf(numberType) !== -1"">Location</option>
                    </select>
                </div>

                <div class="col-md-3 col-sm-3 col-xs-12">
                    <span>Search Pattern</span>
                    <div class="input-group" ng-if="searchType=='pattern'">
                        <div class="input-group-addon">{{ numberPrefix }}</div>
                        <input type="text" ng-model="numFilters.searchNumPattern" class="form-control input-prefix-left" placeholder="Prefix or a number">
                    </div>
                    
                    <!-- region search -->
                    <input ng-if="searchType=='region'" type="text" ng-model="numFilters.searchRegion" class="form-control" placeholder="Region">
                    
                </div>

                <div class="col-md-2 col-sm-2 col-xs-12">
                    <span>&nbsp;</span>
                    <button type="button" class="btn btn-success btn-block  btn- pull-right" ng-click="searchNumbers()">
                        Search Numbers {{isProcessing}}
                    </button>
                </div>
        </div>

        
        <div class="row">
            <div class="x_panel x_content col-md-12 col-sm-12 col-xs-12" >

                <div id="datatable-responsive_wrapper"
                        class="dataTables_wrapper form-inline dt-bootstrap no-footer col-md-12 col-sm-12 col-xs-12">
                    <div id="voxDidGroupScroll" class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">

                            <div class="table-wrapper"
                                    ng-slimscroll horizontal-scroll="true"
                                    height="100%"
                                    horizontal-scroll-position="bottom"
                                    size="5px" opacity="0.4">
                                <table id="datatable-responsive" dt-options="dtOptions" datatable="ng"
                                        class="table table-striped table-bordered dt-responsive nowrap dataTable no-footer dtr-inline"
                                        cellspacing="0" width="100%" role="grid"
                                        aria-describedby="datatable-responsive_info">
                                    <thead>
                                    <tr role="row">
                                        <th class="sorting" tabindex="0" aria-controls="datatable-responsive"
                                            rowspan="1"
                                            colspan="1" aria-label="country">Number & Area
                                        </th>
                                        <th class="sorting" tabindex="0" aria-controls="datatable-responsive"
                                            rowspan="1"
                                            colspan="1" aria-label="voice_rate">Voice rate/Min
                                        </th>
                                        <th class="sorting" tabindex="0" aria-controls="datatable-responsive"
                                            rowspan="1"
                                            colspan="1" aria-label="sms_rate">SMS rate
                                        </th>
                                        <th class="sorting" tabindex="0" aria-controls="datatable-responsive"
                                            rowspan="1"
                                            colspan="1" aria-label="monthly_rental_rate">Monthly fee
                                        </th>
                                        <th class="sorting" tabindex="0" aria-controls="datatable-responsive"
                                            rowspan="1"
                                            colspan="1" aria-label="setup_rate">Setup fee
                                        </th>
                                        <th class="sorting" tabindex="0" aria-controls="datatable-responsive"
                                            rowspan="1"
                                            colspan="1" aria-label="type">Type
                                        </th>
                                        <th class="sorting" tabindex="0" aria-controls="datatable-responsive"
                                            rowspan="1"
                                            colspan="1" aria-label="Requester">
                                        </th>
                                    </thead>
                                    <!-- <tbody ng-if="numberSearchResult && numberSearchResult.length > 0"></tbody> -->
                                    <tbody>
                                        <tr role="row" class="odd"
                                            ng-repeat="number in numberSearchResult">
                                            <td>+{{ number.number}} <br/> {{number.region}}</td>
                                            <td>{{ !number.voice_enabled ? 'N/A' : '$' + parseFloat(number.voice_rate) }}</td>
                                            <td>{{ !number.sms_enabled ? 'N/A' : '$' + parseFloat(number.sms_rate) }}</td>    
                                            <td>${{ parseFloat(number.monthly_rental_rate) }}</td>    
                                            <td>${{ parseFloat(number.setup_rate)}}</td>
                                            <td>{{number.type}}</td>
                                            <td>
                                                <button type="button" class="btn btn-success">
                                                    Select
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <ul uib-pagination total-items="pagination.totalItems" items-per-page="pagination.itemsPerPage" ng-model="pagination.currentPage" max-size="pagination.maxSize" class="pagination-sm" boundary-link-numbers="true" ng-change="pageChanged()"></ul>
                </div>

            </div>
        </div>
        <div id="voxDidLimitScroll" ng-if="selectedVoxDidGroup">
            <div class="row">
                <div class="col-md-5 col-sm-5 col-xs-12 form-group has-feedback">
                    <input type="text" class="form-control has-feedback-left"
                            ng-model="order.customerReference"
                            placeholder="Customer Reference" ng-disabled="true">
                    <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                </div>

                <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                    <input type="number" class="form-control has-feedback-left" ng-model="order.ChannelCount" placeholder="ChannelCount" min="1">
                    <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                </div>

                <div class="col-md-11 col-sm-11 col-xs-12 form-group has-feedback">
                    <input type="text" class="form-control has-feedback-left"
                            ng-model="order.description"
                            placeholder="Description">
                    <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2 col-sm-2 col-xs-12  ">
                    <button type="button" class="btn btn-success btn-block  btn- pull-right"
                            ng-click="showModal()"
                            ng-disabled="order.ChannelCount == null || order.ChannelCount == undefined">
                        Confirm Order
                    </button>
                </div>
                <div class="col-md-2 col-sm-2 col-xs-12  ">
                    <button type="button" class="btn btn-success btn-block  btn- pull-right"
                            ng-click="clearOrder()">
                        Clear
                    </button>
                </div>
            </div>
        </div>
        
    </div>
</div>